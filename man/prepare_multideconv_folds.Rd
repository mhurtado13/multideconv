% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cell_deconvolution.R
\name{prepare_multideconv_folds}
\alias{prepare_multideconv_folds}
\title{Prepare folds for multideconv cross-validation with processed training and test data}
\usage{
prepare_multideconv_folds(deconv, folds, coldata)
}
\arguments{
\item{folds}{A list of integer vectors indicating row indices for the training set in each fold. The test set is implicitly defined as the complement.}

\item{coldata}{A data frame with metadata (e.g., sample annotations), must match the number and order of samples in \code{data}.}

\item{data}{A matrix or data frame of deconvolution features (samples x features) and a column named \code{target} indicating class labels.}
}
\value{
A list of two elements:
\itemize{
\item \code{processed_folds}: A list of folds, where each fold contains:
\itemize{
\item \code{train_data}: Processed training data with cell group features and \code{target} column.
\item \code{test_data}: Test data projected into the learned cell group feature space.
\item \code{obs_test}: True class labels for the test set.
\item \code{rowIndex}: Row indices corresponding to the test set.
\item \code{fold_name}: Optional fold name if provided in the \code{folds} list.
}
\item \code{train_cell_data_final}: Final cell group feature matrix for the full dataset, including the \code{target} column.
}
}
\description{
This function processes a dataset for k-fold cross-validation using the multideconv framework.
For each fold, it generates training and test datasets by computing deconvolution subgroups features from the deconvolution matrix.
It also processes the entire dataset once to provide a final processed training set.
}
\details{
The function runs the \code{compute.deconvolution.analysis()} function on each fold's training set and uses the trained projection
to compute the test set representation. It also runs multideconv on the full dataset to return the complete processed training set.
}
